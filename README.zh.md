# dotGeoMigrata

**README 版本:** Oct 11, 2025

dotGeoMigrata 是一个基于 C# .NET 9.0 的模拟框架，用于研究多城市—人口群体系统中的人口迁移与城市演化。框架捕捉了城市特征如何影响人口流动，以及迁移如何反馈作用于城市因子随时间演化。

## 核心思想

主要模拟流程：

```text
城市因子 → 人群偏好 → 吸引力差异 → 部分迁移 → 城市反馈 → 循环演化
```

人口迁移由城市因子驱动，同时迁移又反作用于城市因子，系统通过时间步迭代不断演化。

## 核心概念

- **世界（World）**：顶层实体，包含城市、因素定义及可选事件，维护全局因素定义和城市当前状态。
- **城市（City）**：拥有因素值（如收入、污染、公共设施）及多个人口群体（如青年、退休者、在业人群），可设容量限制。
- **因素定义与因素值**：定义因素元数据，包括方向（拉力或推力）、标准化方式及取值范围，因素值内部会被标准化用于计算。
- **人口群体（PopulationGroup）**：表示具有相似迁移行为的居民子集，关键属性包括人口数、迁移意愿、保留率、迁移阈值、最低可接受吸引力，并记录对各因素的敏感度。
- **吸引力（Attraction）**：计算某城市对某人口群体的净吸引力，考虑标准化因素值、群体敏感度和因素方向。
- **迁移（Migration）**：迁移判断基于吸引差、阈值及迁移成本，采用概率抽样实现部分迁移，同时考虑群体规模和城市容量。
- **城市反馈**：迁移后城市因素根据反馈机制更新（人均资源、房价、拥挤/污染、产业/经济效应），通常通过平滑避免剧烈波动。

## 模拟流程

1. 初始化世界：设置城市、因素定义、人口群体和敏感度。
2. 每步模拟：
    - 标准化城市因子；
    - 计算每个人口群体对城市的吸引力；
    - 计算迁移概率；
    - 按概率抽样得到实际迁移人数（考虑容量和保留率）；
    - 更新城市人口构成；
    - 根据迁移反馈更新城市因子；
3. 重复至模拟结束（达到最大步数或系统稳定）。

## 安装与使用

克隆仓库后在 Visual Studio 2022+ 中使用 .NET 9.0 打开。通过配置 `World` 对象及城市/人口参数运行模拟。

```csharp
// 示例伪代码
var world = new World(...);
world.RunSimulation(steps: 100);
```

## 贡献

欢迎提交贡献、bug 报告或功能建议，请通过 GitHub issue 或 pull request 提交。
